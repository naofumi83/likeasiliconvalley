---
import BaseLayout from '../../layouts/BaseLayout.astro';
import TagList from '../../components/TagList.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('posts', ({ data }) => !data.draft);

const tagCounts = new Map<string, number>();
for (const post of allPosts) {
  for (const tag of post.data.tags) {
    tagCounts.set(tag, (tagCounts.get(tag) || 0) + 1);
  }
}
---

<BaseLayout title="Tags" description="タグ一覧 - カテゴリ別に記事を探す">
  <div class="flex items-center gap-3 mb-10">
    <h1 class="text-3xl font-bold text-gray-900 dark:text-white">
      Tags
    </h1>
    <div class="flex-1 h-px bg-gradient-to-r from-gray-200 dark:from-white/10 to-transparent"></div>
  </div>

  <TagList tags={tagCounts} />
</BaseLayout>
